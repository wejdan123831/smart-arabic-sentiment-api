<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Arabic Sentiment Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f3f4f6; }
        .drop-zone { border: 2px dashed #3b82f6; transition: all 0.3s ease; }
        .drop-zone:hover { background-color: #eff6ff; border-color: #2563eb; }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-blue-900 mb-2">ğŸ¤– Smart Arabic Sentiment</h1>
            <p class="text-gray-600">Ø­Ù„Ù„ Ø¢Ø±Ø§Ø¡ Ø¹Ù…Ù„Ø§Ø¦Ùƒ Ø¨Ø°ÙƒØ§Ø¡ Ù…Ù† Ø®Ù„Ø§Ù„ Ù…Ù„ÙØ§Øª Excel Ùˆ CSV</p>
        </div>

        <div class="bg-white p-8 rounded-2xl shadow-lg mb-8">
            <div id="dropZone" class="drop-zone rounded-xl p-10 text-center cursor-pointer">
                <div class="text-5xl mb-4">ğŸ“‚</div>
                <p class="text-lg text-gray-700">Ø§Ø³Ø­Ø¨ Ù…Ù„Ù Ø§Ù„Ù€ CSV Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø¶ØºØ· Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</p>
                <input type="file" id="fileInput" class="hidden" accept=".csv, .xlsx, .xls">
            </div>
            <button onclick="uploadFile()" id="uploadBtn" class="w-full mt-6 bg-blue-600 text-white py-3 rounded-xl font-bold text-lg hover:bg-blue-700 transition disabled:bg-gray-400">
                Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ
            </button>
        </div>

        <div id="results" class="hidden space-y-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center text-white">
        <div class="bg-blue-600 p-6 rounded-2xl shadow-md">
            <p class="text-sm opacity-90">Total Comments</p>
            <h2 id="totalCount" class="text-3xl font-bold">0</h2>
        </div>
        <div class="bg-green-500 p-6 rounded-2xl shadow-md">
            <p class="text-sm opacity-90">Positive</p>
            <h2 id="posCount" class="text-3xl font-bold">0</h2>
        </div>
        <div class="bg-yellow-500 p-6 rounded-2xl shadow-md">
            <p class="text-sm opacity-90">Neutral</p>
            <h2 id="neuCount" class="text-3xl font-bold">0</h2>
        </div>
        <div class="bg-red-500 p-6 rounded-2xl shadow-md">
            <p class="text-sm opacity-90">Negative</p>
            <h2 id="negCount" class="text-3xl font-bold">0</h2>
        </div>
    </div>
    </div>
         
            <div class="bg-blue-50 border-r-8 border-blue-600 p-6 rounded-xl shadow-sm">
                <h3 class="text-xl font-bold text-blue-900 mb-2 font-bold">ğŸ’¡ Ù…Ù„Ø®Øµ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (AI Insight):</h3>
                <p id="aiSummary" class="text-blue-800 text-lg leading-relaxed italic">Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù„Ø®Øµ...</p>
            </div>
        </div>
    </div>

    <script>

        
        const fileInput = document.getElementById('fileInput');
        const dropZone = document.getElementById('dropZone');
        const uploadBtn = document.getElementById('uploadBtn');

        dropZone.onclick = () => fileInput.click();

        async function uploadFile() {
            const file = fileInput.files[0];
            if (!file) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹");

            uploadBtn.disabled = true;
            uploadBtn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„... ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± â³";

            const formData = new FormData();
            formData.append('file', file);

            try {
               
                const response = await fetch('http://127.0.0.1:8000/analyze-file', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (response.ok) {
                    document.getElementById('results').classList.remove('hidden');
                    document.getElementById('totalCount').innerText = data.total_comments;
                    document.getElementById('posCount').innerText = data.analysis.positive || 0;
                    document.getElementById('neuCount').innerText = data.analysis.neutral || 0; 
                    document.getElementById('negCount').innerText = data.analysis.negative || 0;
                    document.getElementById('aiSummary').innerText = data.ai_summary;
                } else {
                    alert("Ø®Ø·Ø£: " + data.error);
                }
            } catch (error) {
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±");
            } finally {
                uploadBtn.disabled = false;
                uploadBtn.innerText = "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ";
            }
        }
    </script>
</body>
</html>